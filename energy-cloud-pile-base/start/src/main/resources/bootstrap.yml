server:
  port: ${SERVER_PORT:8082}
spring:
  main:
    allow-bean-definition-overriding: true
    allow-circular-references: true
  application:
    name: pile-base-app
  messages:
    basename: i18n/messages
  mvc:
    pathmatch:
      matching-strategy: ANT_PATH_MATCHER
  cloud:
    nacos:
      config:
        group: ENERGY_GROUP
        file-extension: yml
        extension-configs:
          - data-id: pile-base-app.yml
            group: ENERGY_GROUP
            refresh: true
          - data-id: xxl-job.yml
            group: ENERGY_GROUP
            refresh: true
          - data-id: monitor-elasticsearch.yml
            group: ENERGY_GROUP
            refresh: true
          - data-id: rabbitmq.yml
            group: ENERGY_GROUP
            refresh: true
          - data-id: i18n_baseconfig.yml
            group: I18N_GROUP
            refresh: true
          - data-id: actuator.yml
            group: BASE_GROUP
            refresh: true
          - data-id: hubject-config.yml
            group: ENERGY_GROUP
            refresh: true
          - data-id: wx.yml
            group: BASE_GROUP
            refresh: true
          - data-id: front-config.yml
            group: BASE_GROUP
            refresh: true
          - data-id: request-setting.yml
            group: BASE_GROUP
            refresh: true
          - data-id: redis-jedis.yml
            group: ENERGY_GROUP
            refresh: true
          - data-id: kafka.yml
            group: ENERGY_GROUP
            refresh: true
          - data-id: jwt.yml
            group: BASE_GROUP
            refresh: true
          - data-id: pay-gateway-base.yml
            group: ENERGY_GROUP
            refresh: true
management:
  health:
    rabbit:
      enabled: false

# 开启ACK
spring.rabbitmq.listener.direct.acknowledge-mode: manual #采用手动应答
spring.rabbitmq.listener.simple:
  acknowledge-mode: manual
  auto-startup: true
  default-requeue-rejected: false #不重回队列
  concurrency: 5 #在初始化监听器的时候，并发消费者的数目。
  max-concurrency: 20 #在初始化监听器的时候，并发消费者的数目最大值。
  prefetch: 1 # 每次只处理一个信息
  retry:
    enabled: true
    max-attempts: 3
#      当mandatory标志位设置为true时，如果exchange根据自身类型和消息routingKey无法找到一个合适的queue存储消息，
#      那么broker会调用basic.return方法将消息返还给生产者;当mandatory设置为false时，出现上述情况broker会直接将消息丢弃;
#      通俗的讲，mandatory标志告诉broker代理服务器至少将消息route到一个队列中，否则就将消息return给发送者;
spring.rabbitmq.template.mandatory: true
spring.rabbitmq.publisher-confirm-type: CORRELATED
spring.rabbitmq.publisher-returns: true

mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
fei:
  shu:
    robot:
      flag: false

